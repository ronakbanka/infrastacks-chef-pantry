#
# Chef Server Config File
#
# Dynamically generated by Chef - local modifications will be replaced

<%- if node.platform?('mac_os_x') %>
module ::Chef::Expander   ;                    VNODES = 16 ; end
module ::Chef::IndexQueue ; class AmqpClient ; VNODES = 16 ; end ; end
<%- end %>

log_level               :info
log_location            STDOUT
chef_server_url         "<%= node['chef_server']['url'] %>"

file_cache_path         "<%= node['chef_server']['cache_path'] %>"
file_backup_path        "<%= node['chef_server']['backup_path'] %>"
sandbox_path            "<%= node['chef_server']['cache_path'] %>/sandboxes"
checksum_path           "<%= node['chef_server']['path'] %>/cookbook_index"
node_path               "<%= node['chef_server']['path'] %>/node"
cookbook_tarball_path   "<%= node['chef_server']['path']%>/cookbook-tarballs"
cache_options           ({ :path => "<%= node['chef_server']['cache_path'] %>/checksums", :skip_expires =>true})

validation_client_name  "<%= node['chef_server']['validation_client_name'] %>"
validation_key          "<%= node['chef_server']['conf_dir'] %>/validation.pem"


<% if node['chef_server']['webui_enabled'] -%>
  web_ui_key              "<%= node['chef_server']['conf_dir'] %>/webui.pem"
  web_ui_admin_user_name  "admin"
<% end -%>

supportdir = "<%= node['chef_server']['path'] %>"
solr_jetty_path File.join(supportdir, "solr", "jetty")
solr_data_path  File.join(supportdir, "solr", "data")
solr_home_path  File.join(supportdir, "solr", "home")
solr_heap_size  "<%= node['chef_server']['solr_heap_size'] %>"

couchdb_database        "chef"
amqp_pass               "testing"

umask <%= node['chef_server']['umask'] %>

ssl_verify_mode         :verify_none
signing_ca_cert         "<%= node['chef_server']['conf_dir'] %>/certificates/cert.pem"
signing_ca_key          "<%= node['chef_server']['conf_dir'] %>/certificates/key.pem"
signing_ca_user         "<%= node['chef_server']['user'] %>"
signing_ca_group        "<%= node['chef_server']['group'] %>"
