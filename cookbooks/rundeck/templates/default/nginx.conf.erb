# Generated by Chef
upstream rundeck {
  server localhost:<%= node[:rundeck][:server][:port] %>;
}

server {
  listen 80;
  server_name <%= node[:hostname] %> _ ;
  access_log <%= node[:rundeck][:web][:log_dir] %>/nginx.access.log;
  error_log  <%= node[:rundeck][:web][:log_dir] %>/nginx.error.log;
  
  root <%= node[:rundeck][:home_dir] %>;

  proxy_set_header          X-Real-IP       $remote_addr;    
  proxy_redirect            / /;
  
  location / {
    proxy_set_header          Host $host;
    proxy_pass                http://rundeck;
  }

}