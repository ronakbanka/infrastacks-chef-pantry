# nfs chef cookbook

*NFS* is the venerable Network File System that lets you share a directory across many machines. Its `server` component launches the processes that share a directory. The `client` component installs the right package, discovers the server and the volumes it provides, and mounts those volumes.

* Ironfan tools: [http://github.com/infochimps-labs/ironfan](http://github.com/infochimps-labs/ironfan)
* Homebase (shows cookbook in use): [http://github.com/infochimps-labs/ironfan-homebase](http://github.com/infochimps-labs/ironfan-homebase)

## Overview

Configures NFS.

### Troubleshooting


* On maverick, you have to patch your kernel.

    $ sudo showmount -e localhost
    Export list for localhost:
    /home *.internal


From the client machine, 

    rpcinfo -p 10.220.177.58 | grep nfs

* [How to configure NFS on linux](http://how-to.linuxcareer.com/how-to-configure-nfs-on-linux)

## Recipes 

* `client`                   - NFS client: uses silverware to discover its server, and mounts the corresponding NFS directory
* `default`                  - Base configuration for nfs
* `server`                   - NFS server: exports directories via NFS; announces using silverware.

## Integration

Supports platforms: debian and ubuntu

Cookbook dependencies:

* silverware


## Attributes

* `[:nfs][:exports]`                  - NFS Exports
  - Describes the volumes to export. Supply a list of pairs: <path-to-export, hash-of-NFS-options>. For example, 
       default[:nfs][:exports] = [[ '/home', { :nfs_options => '*.internal(rw,no_root_squash,no_subtree_check)' }]]
* `[:nfs][:mounts]`                   - NFS Mounts
  - The foreign volumes to mount. Uses silverware discovery to find the NFS server for that volume. Supply a list of pairs: <path-to-export, hash-of-NFS-options>.
* `[:nfs][:portmap_port]`             -  (default: "111")
* `[:nfs][:nfsd_port]`                -  (default: "2049")
* `[:nfs][:mountd_port]`              -  (default: "45560")
* `[:nfs][:statd_port]`               -  (default: "56785")
* `[:firewall][:port_scan][:portmap]` - 
* `[:firewall][:port_scan][:nfsd]`    - 
* `[:firewall][:port_scan][:mountd]`  - 
* `[:firewall][:port_scan][:statd]`   - 

## License and Author

Author::                37signals (<sysadmins@37signals.com>)
Copyright::             2011, 37signals

(no license specified)

> readme generated by [ironfan](http://github.com/infochimps-labs/ironfan)'s cookbook_munger
